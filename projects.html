<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>Jato ToDo</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}


#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Jato ToDo</h1>
<span id="author">Pekka Enberg</span><br />
<span id="email"><code>&lt;<a href="mailto:penberg@ki.fi">penberg@ki.fi</a>&gt;</code></span><br />
<span id="revdate">2014</span>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>This document lists features and improvements to the Jato VM for interested
hackers to work on.  The ones in the section labeled as "Priority" are
considered most important.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_priority">Priority</h2>
<div class="sectionbody">
<div class="paragraph"><p>This section contains projects that are considered to be most important to
make Jato a top notch alternative JVM for contemporary applications that are
dominated by alternative languages such as Scala, Clojure, and JRuby.</p></div>
<div class="sect2">
<h3 id="_llvm_backend">LLVM backend</h3>
<div class="paragraph"><p>Implemeting a production quality JIT compiler for a new architecture is
time-consuming and hard.  The goal of this project is to simplify Jato porting
by implementing a code generator using LLVM C bindings.  The work has already
been started and it is visible in the <code>llvm/core</code> branch.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, LLVM, JVM
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium to Hard
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_interpreter">Interpreter</h3>
<div class="paragraph"><p>Jato supports JIT-only execution which is slow for some applications. For
example, startup time for short-lived applications can be reduced with a simple
interpreter. The primary goal of this project is to improve <em>vm/interp.c</em> to
cover the whole bytecode instruction set. Secondary goal for this project is to
implement mixed-mode execution where we start out by interpreting bytecode and
only JIT compile methods that are invoked a lot of times.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, JVM
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_support_for_openjdk">Support for OpenJDK</h3>
<div class="paragraph"><p>Jato uses GNU Classpath to provide essential Java APIs. Unfortunately the
development of GNU Classpath seems to have slowed after OpenJDK was released.
The purpose of this project is to OpenJDK as an alternative for providing
essential APIs for better Java compatibility.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, Java
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_jsr_292_invokedynamic">JSR 292: invokedynamic</h3>
<div class="paragraph"><p>The goal of this project is to add support for the new <code>invokedynamic</code>
bytecode instruction specified in JSR 292 that&#8217;s designed to improve execution
performance of dynamic languages such as JRuby and Redline Smalltalk. Please
note that you also need to do some work in GNU Classpath to be able to run
full invokedynamic applications.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, Java
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium to Hard
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_darwin_port">Darwin Port</h3>
<div class="paragraph"><p>Darwin (a.k.a. Mac OS X) is a popular platform among software developers. The
goal of this project is to get rid of Linuxism such as:</p></div>
<div class="ulist"><ul>
<li>
<p>
Thread-local storage (TLS)
</p>
</li>
<li>
<p>
Signal handling
</p>
</li>
</ul></div>
<div class="paragraph"><p>and be able to run Jato under Darwin.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, Darwin
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium to Hard
</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_performance">Performance</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ssa_form">SSA form</h3>
<div class="paragraph"><p>The JIT compiler support SSA form but it&#8217;s currently disabled by default
because it breaks some DaCapo benchmarks. The goal of this project is to fix
all the remaining issues in SSA form conversion so that it can be enabled by
default.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, x86
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Hard
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_method_inlining">Method Inlining</h3>
<div class="paragraph"><p>Method inlining is an optimization where a method invocation is replaced with
an inline copy of the invoked method body. As shown by <a href="#Suganuma02">[Suganuma02]</a>, static
inlining decisions only make sense for tiny methods where the body of the
method is smaller than the invocation site footprint. The purpose of this
project is to implement method inlining for tiny static methods and optionally,
if inline cache support is added to the VM, inlining of tiny virtual and
interface methods to the inline cache.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, x86
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_array_bounds_check_elimination">Array Bounds Check Elimination</h3>
<div class="paragraph"><p>Out-of-bounds array stores and loads are required to throw the
<code>IndexOutOfBoundsException</code>. Currently the JIT compiler generates a bounds
check for every array access which is slow as seen in the SciMark2 benchmark,
for example. Fortunately, much of the array bounds checks can be eliminated
which speeds up SciMark by 40% and SPECjvm98 2% on average <a href="#Wuerthinger07">[Wuerthinger07]</a>.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_register_allocator_improvements">Register Allocator Improvements</h3>
<div class="paragraph"><p>Linear scan register allocator functions show up high in performance profiles
for many applications. The goal of this project is to improve both the speed of
the register allocator and the generated code. One such improvement would be to
use the SSA form in the register allocator <a href="#Moe02">[Moe02]</a>.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_startup_time">Startup Time</h3>
<div class="paragraph"><p>The purpose of this project is to improve VM startup time. There are two
different classes of applications to optimize: command line applications such
as Ant and Maven and graphical user interface applications such as Eclipse.
Both classes might require different kinds of hacks to speed up the start up
time. You might need to optimize GNU Classpath and external libraries Jato uses
during VM startup.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, Java
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_tail_call_optimizations">Tail Call Optimizations</h3>
<div class="paragraph"><p>Functional languages such as Scala and Clojure make heavy use of tail-calls.
The purpose of this project is to implement tail call optimizations to speed up
functional languages on JVM. For background material, check out HotSpot
<a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4726340">Request for
Enhancement</a> on tail-call optimizations and a related blog post by
<a href="http://blogs.sun.com/jrose/entry/tail_calls_in_the_vm">John Rose</a> ("Tail calls
in the VM").</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, x86
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Hard
</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_virtual_machine">Virtual Machine</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ahead_of_time_compilation">Ahead-of-time Compilation</h3>
<div class="paragraph"><p>The goal of this project is to implement support for ahead-of-time compilation.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, JVM
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Hard
</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_garbage_collector">Garbage Collector</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_exact_gc">Exact GC</h3>
<div class="paragraph"><p>Jato uses Boehm GC as its garbage collector. While Boehm GC is stable and
reliable, it&#8217;s unnecessarily slow because it&#8217;s based on a conservative GC
algorithm. The first step for a fully integrated and fast garbage collector is
to implement an exact GC that uses safepoints (also known as GC points) to
stop-the-world and GC maps to enumerate the GC root set. There&#8217;s a broken
implementation of safepoints in <em>vm/gc.c</em> that serves as a starting point for
the project.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, x86
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_compacting_gc">Compacting GC</h3>
<div class="paragraph"><p>This project is for implementing a compacting GC on top of the core GC to
reduce memory fragmentation and speed up object allocation in the GC.  Please
note that this requires support from the VM and the JIT compiler because you
need to be able to move objects during compacting phase.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, x86
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Hard
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_low_latency_gc">Low Latency GC</h3>
<div class="paragraph"><p>The stop-the-world part of a GC can cause latencies in the order of many
milliseconds in Java applications. While there are pauseless GCs for special
purpose hardware, the purpose of this project is to implement GC latency
monitoring tools for the VM and investigate and implement practical solutions
for reducing GC latency on commodity hardware.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, x86
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Hard
</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_x86">x86</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_x86_64_support">x86-64 support</h3>
<div class="paragraph"><p>The x86-64 architecture support in native JIT is still buggy.  The purpose of
this project is to finish the port and make it stable.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, x86-64, ABI, assembly
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
   Hard
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_legacy_floating_point_support_x87">Legacy floating point support (x87)</h3>
<div class="paragraph"><p>Add instruction selection and code emission for floating point arithmetic using
the x87 FPU instruction such as <code>fadd</code> and <code>fdiv</code>. The main difference to the
project idea above is that the x87 instructions do not operate on regular
registers but use a stack-based approach which makes instruction selection
harder. As the SSE2 approach is more performant, the x87 support is only for
compatilibity with older x86 CPUs that do not support SSE.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, x86
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_arm">ARM</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_arm_support">ARM support</h3>
<div class="paragraph"><p>The purpose of this project is to port Jato the the ARM architecture.  Possibly
even the upcoming 64-bit ARM.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, ARM, ABI, assembly
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Hard
</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_portability">Portability</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_machine_architectures">Machine Architectures</h3>
<div class="paragraph"><p>To port the VM to a new architecture, you need to introduce a new
<em>arch/&lt;target&gt;</em> directory that implements the following machine architecture
specific parts:</p></div>
<div class="ulist"><ul>
<li>
<p>
Instruction encoding (see <em>arch/x86/emit.c</em> and <em>arch/x86/encoding.c</em>)
</p>
</li>
<li>
<p>
Instruction selection (see <em>arch/x86/insn-selector.brg</em>)
</p>
</li>
<li>
<p>
Exception handling (see <em>arch/x86/unwind_{32,64}.S</em>)
</p>
</li>
<li>
<p>
Signal bottom halves (see <em>arch/x86/signal.c</em> and <em>arch/x86/signal-bh.sh</em>)
</p>
</li>
<li>
<p>
<code>sun/misc/Unsafe</code> locking primitives (see <em>arch/x86/include/arch/cmpxchg*.h</em>)
</p>
</li>
</ul></div>
<div class="paragraph"><p>You also need to make sure the core code in <em>vm</em>, <em>jit</em>, and <em>runtime</em>
directories works on your architecture. Special attention needs to be paid when
porting to big endian CPUs because of our x86 centric heritage.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, target machine architecture
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Hard
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_windows_port">Windows Port</h3>
<div class="paragraph"><p>The goal of this project is to port Jato to Windows.  Please note that the
codebase currently is very GCC and Linux specific which are likely to bite you
when porting to native Windows toolchain:</p></div>
<div class="ulist"><ul>
<li>
<p>
ABI issues (e.g. Microsoft x64 calling conventions)
</p>
</li>
<li>
<p>
Thread-local storage (TLS)
</p>
</li>
<li>
<p>
Signal handling
</p>
</li>
<li>
<p>
POSIXism
</p>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, Windows
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium to Hard
</p>
</dd>
</dl></div>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_clang">Clang</h3>
<div class="paragraph"><p>Clang is an interesting new compiler built on top of LLVM that claims faster
compilation times and better code generation. The purpose of this project is to
fix blatant GCC-ism in Jato to make it compile with Clang. Please note that you
might need to dive into LLVM and Clang sources if you run into Clang crashes
while compiling the VM.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, possibly LLVM
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium to Hard
</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jvm">JVM</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_java_native_interface_jni_support">Java Native Interface (JNI) support</h3>
<div class="paragraph"><p>The VM has partial support for Java Native Interface (JNI) API. The goal of
this project is to finish the API.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, Java
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_jvm_tool_interface_jvm_ti">JVM Tool Interface (JVM TI)</h3>
<div class="paragraph"><p>The JVM Tool Inteface is a native programming interface that&#8217;s used by
development tool such as commercial YourKit Java Profiler.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, Java
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tools_support">Tools Support</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_valgrind">Valgrind</h3>
<div class="paragraph"><p>You can run Jato under Valgrind to detect bugs in the VM. However, to
accomplish that, Jato generates slightly different code because using signals
for lazy class initialization interracts badly with Valgrind. Furthermore,
throwing a <code>NullPointerException</code> through <code>SIGSEGV</code> also upsets Valgrind.</p></div>
<div class="paragraph"><p>The goal of this project is to fix up Jato and Valgrind interractions. This
might require changes possibly in both projects.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, x86
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_gdb">GDB</h3>
<div class="paragraph"><p>Jato already hooks into GDB&#8217;s JIT interface to provide basic debugging
functionality such as backtraces and breakpoints. This could use a cleanup and
various improvements, like the ability to display the arguments passed to a
method. We could implement a better mangling scheme, but it&#8217;s probably better
to use the new custom debug info support in GDB 7.4. Check the
<a href="http://sourceware.org/gdb/onlinedocs/gdb/JIT-Interface.html#JIT-Interface">GDB
documentation</a> for details.</p></div>
<div class="paragraph"><p>Another possible improvement could be minimizing the need to disable
optimizations.</p></div>
<div class="paragraph"><p>This task should be rather straightforward, but it might require digging
through GDB to figure out possibly missing details from the documentation. It
can be scaled according to the features one proposes to implement.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, GDB, x86(-64)
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium, depends on the scope of the proposal
</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_other">Other</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_fork_support">fork() support</h3>
<div class="paragraph"><p>The JRuby VM is unable to support fork() because OpenJDK does not support it.
The goal of this project is to make Java programs running under Jato be able to
call fork() and still have a working system.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, POSIX
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_posix_api_support">POSIX API support</h3>
<div class="paragraph"><p>Projects like JRuby and Cassandra rely heavily on OS specific APIs for
correctness and performance reasons. The goal of this project is to support
POSIX APIs in Jato efficiently. Ideally, we should be able to inline the actual
API calls directly to the JIT&#8217;d machine code so that there&#8217;s zero overhead.</p></div>
<div class="paragraph"><p>As a starting point, you should look into the JNR POSIX project to see what
Jato can do to make it work and perform well out-of-the-box.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, POSIX
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_jit_api">JIT API</h3>
<div class="paragraph"><p>VMs that run on the JVM need to transform their internal representation into
bytecode for the JIT to kick in. This is wasteful because JVMs will immediately
transform the bytecode to their own intermediate representation.</p></div>
<div class="paragraph"><p>The goal of this project is to implement a Java API that allows Java programs
to generate JIT&#8217;d code directly and bypass the bytecode conversion layer.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, POSIX
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_jit_preloading">JIT preloading</h3>
<div class="paragraph"><p>The goal of this project is to implement support for saving off JITted code and
preload it to speed up startup time.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Medium
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_dalvik">Dalvik</h3>
<div class="paragraph"><p>The Dalvik VM is very similar to the JVM semantically. The goal of this project
is to implement support for running Dalvik applications under Jato.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Required skills
</dt>
<dd>
<p>
    C, POSIX
</p>
</dd>
<dt class="hdlist1">
Difficulty
</dt>
<dd>
<p>
    Hard
</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">References</h2>
<div class="sectionbody">
<div class="ulist bibliography"><ul>
<li>
<p>
<a id="Cooper01"></a>[Cooper01] Keith Cooper et al. A Simple, Fast Dominance Algorithm. 2001.
  <a href="http://www.cs.rice.edu/~keith/EMBED/dom.pdf">URL</a>
</p>
</li>
<li>
<p>
<a id="Moe02"></a>[Moe02] Hanspeter Mössenböck and Michael Pfeiffer. Linear Scan Register
  Allocation in the Context of SSA Form and Register Constraints. 2002.
  <a href="http://www.ssw.uni-linz.ac.at/Research/Papers/Moe02.html">URL</a>
</p>
</li>
<li>
<p>
<a id="Suganuma02"></a>[Suganuma02] Toshio Suganuma et al. An Empirical Study of Method Inlining
  for a Java Just-In-Time Compiler. <a href="http://www.usenix.org/events/javavm02/suganuma/suganuma_html/">URL</a>
</p>
</li>
<li>
<p>
<a id="Wuerthinger07"></a>[Wuerthinger07] Thomas Würthinger and Christian Wimmer. Array Bounds
  Check Elimination for the Java HotSpot™ Client Compiler. 2007.
  <a href="http://www.ssw.uni-linz.ac.at/Research/Papers/Wuerthinger07/">URL</a>
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2014-02-03 22:02:01 EET
</div>
</div>
</body>
</html>
